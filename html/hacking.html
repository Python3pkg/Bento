<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Design document &mdash; Bento v0.0.3 documentation</title>
    <link rel="stylesheet" href="static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.3',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="Bento v0.0.3 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Bento v0.0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Design document</a><ul>
<li><a class="reference external" href="#commands-protocol">Commands &#8220;protocol&#8221;</a></li>
<li><a class="reference external" href="#build-manifest-and-building-installers">Build manifest and building installers</a><ul>
<li><a class="reference external" href="#installers-conversion">Installers conversion</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/hacking.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="design-document">
<h1>Design document<a class="headerlink" href="#design-document" title="Permalink to this headline">¶</a></h1>
<p>Bento is currently split into two parts: a core API to parse the
package description into a simple object API, and a commands library
which gives a command line interface to bento.</p>
<p>The main design philosophy of bento is to clearly separate the
different stages of packaging deployment, as we believe it is the only
way to make a build tool extensible.</p>
<div class="section" id="commands-protocol">
<h2>Commands &#8220;protocol&#8221;<a class="headerlink" href="#commands-protocol" title="Permalink to this headline">¶</a></h2>
<p>The command line interface of bento currently supports 3 stages:</p>
<blockquote>
<ul class="simple">
<li>configuration: is concerned with configuring user options
(build/install customization).</li>
<li>build: compile C extensions</li>
<li>install: deploy the software into the system as configured
at the first stage. Installers are considered installation
as well for reasons explained later.</li>
</ul>
</blockquote>
<p>Although those stages are very similar to distutils/setuptools
mechanism, the implementation is fundamentally different, because each
stage is as much independent as possible. No python object is directly
shared between commands - the current bentomaker implementation
implements each stage as a separate run.</p>
</div>
<div class="section" id="build-manifest-and-building-installers">
<h2>Build manifest and building installers<a class="headerlink" href="#build-manifest-and-building-installers" title="Permalink to this headline">¶</a></h2>
<p>Bento uses a slightly unusal process to install the bits of your
package. Instead of copying directly the files to the desired
location, the install process is driven by a build manifest. This
build manifest is produced by the build command. It contains a
description of files per category as well as metadata.</p>
<p>The built bits and the build manifest are enough to install the
software to arbitrary location, so that the install process does not
need to know anything about the build process.  Conversely, as long as
you can produce a build manifest, you can use the installation
commands as is.</p>
<p>Besides installation, the manifest is also used to produce installers.
Currently, only windows installers and eggs are supported, but adding
new types of installers should be easier than with distutils. If you
look at the build_wininst and build_egg commands source code, they are
simple, and most of the &#8220;magic&#8221; happens in the build manifest. In
particular, the build manifest still refers to installed bits
relatively to abstract paths, and those paths are resolved when
building the installers.</p>
<div class="section" id="installers-conversion">
<h3>Installers conversion<a class="headerlink" href="#installers-conversion" title="Permalink to this headline">¶</a></h3>
<p>The build manifest is intended to be included in each produced
installer, for easy convertion between various formats easily. The
goal is to have idempotent conversion (e.g.  converting an egg to
wininst and then converting it back to an egg produces the exact same
egg).</p>
<p>We also intend to use build manifest for the upcoming &#8216;&#8217;nest&#8217;&#8217;
service, which will contain a database of installed software.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Bento v0.0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, David Cournapeau.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>